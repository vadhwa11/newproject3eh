<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="DoctorPerformanceReport"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="595"
		 pageHeight="842"
		 columnWidth="535"
		 columnSpacing="0"
		 leftMargin="30"
		 rightMargin="30"
		 topMargin="20"
		 bottomMargin="20"
		 whenNoDataType="NoPages"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="fromDate" isForPrompting="true" class="java.util.Date">
		<defaultValueExpression ><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="toDate" isForPrompting="true" class="java.util.Date">
		<defaultValueExpression ><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_1" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_2" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_3" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_4" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_5" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_6" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_7" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_8" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_9" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_10" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_11" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_12" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_13" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_14" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_15" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId_16" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString><![CDATA[select m1.* , (select hospital_name from mas_hospital where hospital_id =me.hospital_id)
as hospitalname, (me.first_name||' '||me.middle_name||' '||me.last_name) as fullname from
(select main.consultant_id,main.bill_date,sum(main.ipop) as ipop,sum(main.amt) as amt
,sum(main.diagnostic) as diagnostic from (select firstsql.*,secondsql.diagnostic from
(select count(*) as ipop, chg_slp_date as bill_date,sum(coalesce(net_amt,0)) as amt,
consultant_id from bl_charge_slip_main b 
group by consultant_id,chg_slp_date,os_amt) as firstsql

inner join

(select count(hin_id) as diagnostic,consultant_id,chg_slp_date from
bl_charge_slip_main where charge_slip_main_id in(
select charge_slip_main_id from bl_charge_slip_detail where charge_code_id in(
select charge_code_id from mas_charge_code m where charge_type_id=2))
group by consultant_id,chg_slp_date) as secondsql
on firstsql.consultant_id = secondsql.consultant_id and
firstsql.bill_date = secondsql.chg_slp_date

union

select count(*) as ipop,bill_date,sum(coalesce(net_amt,0)) as amt,consultant_id,0 as diagnostic
from bl_op_bill_header b group by consultant_id,bill_date,net_amt) as main
group by main.consultant_id,main.bill_date) as m1

inner join

mas_employee me

on m1.consultant_id = me.employee_id and m1.bill_date between $P{fromDate} and $P{toDate} and me.hospital_id=$P{hospitalId}]]></queryString>

	<field name="consultant_id" class="java.lang.Integer"/>
	<field name="bill_date" class="java.sql.Timestamp"/>
	<field name="ipop" class="java.math.BigDecimal"/>
	<field name="amt" class="java.math.BigDecimal"/>
	<field name="diagnostic" class="java.math.BigDecimal"/>
	<field name="hospitalname" class="java.lang.String"/>
	<field name="fullname" class="java.lang.String"/>

	<variable name="srNo" class="java.lang.Integer" resetType="Group" resetGroup="Doctor" calculation="Count">
		<variableExpression><![CDATA[new java.lang.Integer(  ($V{REPORT_COUNT}.intValue()) )]]></variableExpression>
	</variable>
	<variable name="TotalAmount" class="java.math.BigDecimal" resetType="Group" resetGroup="Doctor" calculation="Sum">
		<variableExpression><![CDATA[$F{amt}]]></variableExpression>
	</variable>

		<group  name="Doctor" >
			<groupExpression><![CDATA[$F{fullname}]]></groupExpression>
			<groupHeader>
			<band height="29"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						x="99"
						y="17"
						width="30"
						height="9"
						key="staticText-15"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true"/>
					</textElement>
				<text><![CDATA[S. No.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="129"
						y="17"
						width="71"
						height="9"
						key="staticText-16"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true"/>
					</textElement>
				<text><![CDATA[Date]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="351"
						y="17"
						width="82"
						height="9"
						key="staticText-21"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true"/>
					</textElement>
				<text><![CDATA[Total Bill Amount]]></text>
				</staticText>
				<line direction="TopDown">
					<reportElement
						x="98"
						y="26"
						width="339"
						height="2"
						key="line-9"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch" pen="Dotted"/>
				</line>
				<staticText>
					<reportElement
						mode="Transparent"
						x="199"
						y="17"
						width="77"
						height="9"
						key="staticText-31"
						positionType="Float"
						isRemoveLineWhenBlank="true"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true" isPdfEmbedded ="false"/>
					</textElement>
				<text><![CDATA[Diagnostic Orders]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="18"
						y="1"
						width="72"
						height="12"
						key="staticText-32"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-BoldOblique" size="9" isBold="true" isItalic="true"/>
					</textElement>
				<text><![CDATA[Doctor Name :]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="95"
						y="1"
						width="138"
						height="12"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-BoldOblique" size="9" isBold="true" isItalic="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{fullname}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="15"
						width="535"
						height="0"
						key="line-11"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<staticText>
					<reportElement
						mode="Transparent"
						x="275"
						y="17"
						width="77"
						height="9"
						key="staticText-34"
						positionType="Float"
						isRemoveLineWhenBlank="true"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true" isPdfEmbedded ="false"/>
					</textElement>
				<text><![CDATA[No.Of IP/OP]]></text>
				</staticText>
			</band>
			</groupHeader>
			<groupFooter>
			<band height="15"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						x="276"
						y="2"
						width="74"
						height="10"
						key="staticText-14"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true"/>
					</textElement>
				<text><![CDATA[Net Amount:]]></text>
				</staticText>
				<line direction="TopDown">
					<reportElement
						x="98"
						y="2"
						width="338"
						height="0"
						key="line-10"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="14"
						width="532"
						height="0"
						key="line-12"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" pattern="##0.00" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="350"
						y="1"
						width="83"
						height="12"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="7"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$V{TotalAmount}]]></textFieldExpression>
				</textField>
			</band>
			</groupFooter>
		</group>
		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</title>
		<pageHeader>
			<band height="60"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="0"
						width="535"
						height="20"
						key="textField-1"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="12" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{hospitalname}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="0"
						y="20"
						width="535"
						height="20"
						key="staticText-1"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Doctor Performance Report]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="178"
						y="44"
						width="48"
						height="12"
						key="staticText-2"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[From Date ]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="232"
						y="44"
						width="58"
						height="12"
						key="textField-2"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="8"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$P{fromDate}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="290"
						y="44"
						width="40"
						height="12"
						key="staticText-3"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="7" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[To Date ]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="330"
						y="44"
						width="77"
						height="12"
						key="textField-3"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="8"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$P{toDate}]]></textFieldExpression>
				</textField>
			</band>
		</pageHeader>
		<columnHeader>
			<band height="1"  isSplitAllowed="true" >
				<line direction="TopDown">
					<reportElement
						x="0"
						y="0"
						width="535"
						height="0"
						key="line-8"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
			</band>
		</columnHeader>
		<detail>
			<band height="11"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="99"
						y="2"
						width="30"
						height="9"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="6"/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$V{srNo}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="129"
						y="2"
						width="71"
						height="9"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="6"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$F{bill_date}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="###0" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="199"
						y="2"
						width="77"
						height="9"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="6"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$F{diagnostic}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="##0.00" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="350"
						y="2"
						width="82"
						height="9"
						key="textField"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="6"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$F{amt}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="###0" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="275"
						y="2"
						width="77"
						height="9"
						key="textField-4"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="SansSerif" size="6"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$F{ipop}]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="1"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageFooter>
		<summary>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</summary>
</jasperReport>
